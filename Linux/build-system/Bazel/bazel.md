### key Bazel concepts

- The `WORKSPACE` file, which identifies the directory and its contents as a Bazel workspace and lives at the root of the project’s directory structure

- To designate a directory as a Bazel workspace, create an empty file named `WORKSPACE` in that directory.

- The `WORKSPACE` file may be empty or may contain references to [external dependencies](https://docs.bazel.build/versions/3.7.0/external.html) required to build your project.

- One or more `BUILD` files, which tell Bazel how to build different parts of the project. (A directory within the workspace that contains a `BUILD` file is a *package*. You will learn about packages later in this tutorial.)

- A `BUILD` file contains several different types of instructions for Bazel. The most important type is the *build rule*, which tells Bazel how to build the desired outputs, such as executable binaries or libraries. A `BUILD file` describes the relationship between a set of build outputs. `BUILD` files are written in a language called **Starlark**.

- Each `package` is a directory (and its subdirectories) that contains a related set of source files and a `BUILD` file. The package also includes any subdirectories, excluding those that contain their own `BUILD` file. The *package name* is the path to the `BUILD` file relative to the `WORKSPACE`.

- A successful build has all of its dependencies explicitly stated in the `BUILD` file. Bazel uses those statements to create the project’s dependency graph, **which enables accurate incremental builds**.

  ```cpp
  bazel query --notool_deps --noimplicit_deps "deps(//main:hello-world)" \
    --output graph
  ```

  The above command tells Bazel to look for all dependencies for the target `//main:hello-world` (excluding host and implicit dependencies) and format the output as a graph.

  Then, paste the text into [GraphViz](http://www.webgraphviz.com/).

- When referencing targets at the repository root, the package path is empty, just use `//:target-name`. When referencing targets within the same `BUILD` file, you can even skip the `//` workspace root identifier and just use `:target-name`.

- All targets belong to exactly one package. The name of a target is called its *label*, and a typical label in canonical form looks like this:

  ```cpp
  @myrepo//my/app/main:app_binary
  ```

  In the typical case that a label refers to the same repository it occurs in, the repository name may be left out. So, inside `@myrepo` this label is usually written as

  ```cpp
  //my/app/main:app_binary
  ```

  Each label has two parts, a package name (`my/app/main`) and a target name (`app_binary`). Every label uniquely identifies a target. Labels sometimes appear in other forms; when the colon is omitted, the target name is assumed to be the same as the last component of the package name, so these two labels are equivalent:

  ```cpp
  //my/app
  //my/app:app
  ```

- `bazel-bin` stores binary executables and other runnable build outputs

- `bazel-genfiles` stores intermediary source files that are generated by Bazel rules

- `bazel-out` stores other types of build outputs

### Basic command

- ```cpp
  bazel build //main:hello-world
  ```

  Notice the target label - the `//main:` part is the location of our `BUILD` file relative to the root of the workspace, and `hello-world` is what we named that target in the `BUILD` file. 
  
- ```cpp
  bazel info workspace	
  ```

  check if Bazel is running correctly with the command. If Bazel prints the path of the current directory, you’re good to go! If the `WORKSPACE` file does not exist, you may see an error message.

- ```cpp
  bazel mobile-install //src/main:app
  ```

  The `mobile-install` command installs apps to mobile devices. Currently only Android devices running ART are supported. See [bazel mobile-install](https://docs.bazel.build/versions/3.7.0/mobile-install.html) for more information. deploy the app to a connected Android device or emulator from the command line using the [`bazel mobile-install`](https://docs.bazel.build/versions/3.7.0/user-manual.html#mobile-install) command. This command uses the Android Debug Bridge (`adb`) to communicate with the device. 

### Reference

- https://docs.bazel.build/versions/3.7.0/tutorial/cpp.html
- https://docs.bazel.build/versions/3.7.0/cpp-use-cases.html